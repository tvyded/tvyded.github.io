<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä ¬∑ –≤—Ä–µ–º–µ–Ω–∞ –≥–æ–¥–∞</title>
  <style>
    /* ===== –ë–ê–ó–û–í–´–ô –°–ë–†–û–° –ò –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0b1120;  /* fallback */
      transition: background 0.6s ease;
      padding: 1rem;
      position: relative;
      overflow-x: hidden;
    }

    /* ----- –ö–û–ù–¢–ï–ô–ù–ï–† –ú–ï–°–°–ï–ù–î–ñ–ï–†–ê (–°–¢–ï–ö–õ–û) ----- */
    .messenger {
      width: 100%;
      max-width: 900px;
      height: 85vh;
      background: rgba(20, 20, 30, 0.3);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-radius: 3rem 1.5rem 3rem 1.5rem;
      border: 2px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 40px 70px -20px rgba(0, 0, 0, 0.5), inset 0 1px 2px rgba(255,255,255,0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transition: border-radius 0.3s, background 0.5s, border-color 0.5s, box-shadow 0.5s;
      animation: floatUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
      position: relative;
      z-index: 10;
    }

    @keyframes floatUp {
      0% { opacity: 0; transform: translateY(40px) scale(0.96); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* ----- –®–ê–ü–ö–ê –° –£–ü–†–ê–í–õ–ï–ù–ò–ï–ú ----- */
    .messenger-header {
      padding: 1.5rem 2rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 2px solid rgba(255,255,255,0.1);
      flex-wrap: wrap;
      gap: 1rem;
    }

    .title-block h2 {
      font-size: 1.9rem;
      font-weight: 500;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, var(--text-primary, #fff) 30%, var(--accent, #aaa) 80%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      transition: background 0.3s;
    }

    .title-block p {
      font-size: 0.95rem;
      color: var(--text-secondary, #ccc);
      margin-top: 0.2rem;
    }

    /* –ø–∞–Ω–µ–ª—å –∫–Ω–æ–ø–æ–∫ */
    .controls {
      display: flex;
      gap: 1rem;
      align-items: center;
    }

    /* –æ–±—â–∏–π —Å—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–æ–∫ */
    .theme-btn, .season-btn {
      background: rgba(255,255,255,0.1);
      border: 2px solid rgba(255,255,255,0.15);
      border-radius: 3rem;
      padding: 0.7rem 1.3rem;
      font-size: 1.2rem;
      font-weight: 500;
      color: white;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      cursor: pointer;
      backdrop-filter: blur(8px);
      box-shadow: 0 8px 20px -10px rgba(0,0,0,0.5);
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      outline: none;
    }

    .theme-btn:hover, .season-btn:hover {
      border-color: var(--accent, #b794f4);
      transform: scale(1.05) translateY(-2px);
      box-shadow: 0 15px 25px -8px var(--accent-glow, rgba(183,148,244,0.6));
    }

    .theme-btn:active, .season-btn:active {
      transform: scale(0.96);
    }

    /* –∏–∫–æ–Ω–∫–∏ –≤–Ω—É—Ç—Ä–∏ –∫–Ω–æ–ø–æ–∫ */
    .btn-icon {
      font-size: 1.6rem;
      line-height: 1;
      transition: transform 0.5s ease;
    }

    .season-btn .btn-icon {
      display: inline-block;
      animation: softSpin 0.6s;
    }

    @keyframes softSpin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ----- –û–ö–ù–û –°–û–û–ë–©–ï–ù–ò–ô ----- */
    .messages-container {
      flex: 1;
      overflow-y: auto;
      padding: 2rem 2rem 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      scroll-behavior: smooth;
    }

    /* –ø–æ–ª–æ—Å–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç–∏–ª—å–Ω–∞—è */
    .messages-container::-webkit-scrollbar {
      width: 8px;
    }
    .messages-container::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.05);
      border-radius: 20px;
    }
    .messages-container::-webkit-scrollbar-thumb {
      background: var(--accent, #aaa);
      border-radius: 20px;
      border: 2px solid transparent;
    }

    /* –±–∞–∑–æ–≤—ã–π —Å—Ç–∏–ª—å —Å–æ–æ–±—â–µ–Ω–∏—è */
    .message {
      max-width: 75%;
      padding: 1rem 1.8rem;
      border-radius: 2rem 1rem 2rem 1rem;
      background: var(--message-bg, rgba(30,30,40,0.7));
      backdrop-filter: blur(10px);
      color: var(--text-primary, #eee);
      font-size: 1.05rem;
      line-height: 1.5;
      word-break: break-word;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      border: 1px solid var(--message-border, rgba(255,255,255,0.1));
      transition: all 0.25s ease;
      animation: messagePop 0.4s cubic-bezier(0.21, 1.11, 0.3, 1) forwards;
      transform-origin: left;
    }

    /* —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–ø—Ä–∞–≤–∞) */
    .message.own {
      align-self: flex-end;
      border-radius: 1rem 2rem 1rem 2rem;
      background: var(--own-message-bg, rgba(100,80,160,0.7));
      border-color: var(--accent, #b794f4);
      color: white;
      transform-origin: right;
    }

    @keyframes messagePop {
      0% { opacity: 0; transform: scale(0.8); }
      80% { transform: scale(1.02); }
      100% { opacity: 1; transform: scale(1); }
    }

    /* —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Ü–µ–Ω—Ç—Ä) */
    .message.system {
      align-self: center;
      background: rgba(0,0,0,0.2);
      border: 1px dashed var(--accent, #aaa);
      font-style: italic;
      font-size: 0.95rem;
      color: var(--text-secondary, #bbb);
      max-width: 60%;
      text-align: center;
      backdrop-filter: blur(5px);
    }

    /* ----- –ü–û–õ–ï –í–í–û–î–ê ----- */
    .input-area {
      padding: 1.5rem 2rem;
      background: rgba(0,0,0,0.15);
      border-top: 2px solid rgba(255,255,255,0.05);
      display: flex;
      gap: 1rem;
      align-items: center;
      backdrop-filter: blur(10px);
    }

    .message-input {
      flex: 1;
      background: rgba(255,255,255,0.07);
      border: 2px solid rgba(255,255,255,0.1);
      border-radius: 3rem;
      padding: 1rem 1.8rem;
      font-size: 1.1rem;
      color: var(--text-primary, white);
      outline: none;
      transition: all 0.3s;
    }

    .message-input:focus {
      border-color: var(--accent, #b794f4);
      box-shadow: 0 0 0 4px var(--accent-glow, rgba(183,148,244,0.3));
      background: rgba(255,255,255,0.12);
    }

    .message-input::placeholder {
      color: var(--text-secondary, #aaa);
      font-style: italic;
    }

    .send-btn {
      background: var(--accent, #7c5cf0);
      border: none;
      border-radius: 3rem;
      width: 60px;
      height: 60px;
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      transition: all 0.25s;
      box-shadow: 0 5px 15px var(--accent-glow, rgba(124,92,240,0.5));
      border: 2px solid rgba(255,255,255,0.3);
    }

    .send-btn:hover {
      transform: scale(1.1) rotate(5deg);
      filter: brightness(1.2);
    }

    .send-btn:active {
      transform: scale(0.9);
    }

    /* ===== –ß–ê–°–¢–ò–¶–´ –í–†–ï–ú–Å–ù –ì–û–î–ê (–∞–Ω–∏–º–∞—Ü–∏—è —Ñ–æ–Ω–∞) ===== */
    .season-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      font-size: 2rem;
      opacity: 0.3;
      animation: particleFloat 15s infinite linear;
      user-select: none;
    }

    @keyframes particleFloat {
      0% { transform: translateY(100vh) rotate(0deg) scale(0.5); opacity: 0; }
      10% { opacity: 0.4; }
      90% { opacity: 0.4; }
      100% { transform: translateY(-20vh) rotate(360deg) scale(1.2); opacity: 0; }
    }

    /* ===== –¢–ï–ú–´ –ò –°–ï–ó–û–ù–´ (CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ) ===== */
    body {
      /* –±–∞–∑–æ–≤—ã–µ (—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞, –∑–∏–º–∞) */
      --bg-gradient-start: #d9e9fa;
      --bg-gradient-end: #bbd6f0;
      --text-primary: #1e293b;
      --text-secondary: #334155;
      --accent: #0284c7;
      --accent-glow: rgba(2, 132, 199, 0.5);
      --message-bg: rgba(255,255,255,0.7);
      --own-message-bg: rgba(2, 132, 199, 0.7);
      --message-border: rgba(255,255,255,0.6);
    }

    /* —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞ (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∞–∑–æ–≤—ã–µ) */
    body.theme-dark {
      --bg-gradient-start: #0f172a;
      --bg-gradient-end: #1e293b;
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --accent: #38bdf8;
      --accent-glow: rgba(56, 189, 248, 0.5);
      --message-bg: rgba(30, 41, 59, 0.8);
      --own-message-bg: rgba(56, 189, 248, 0.7);
      --message-border: rgba(255,255,255,0.1);
    }

    /* —Å–µ–∑–æ–Ω—ã (–ø–æ–≤–µ—Ä—Ö —Ç–µ–º—ã) ‚Äî –º–µ–Ω—è–µ–º accent –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã */
    body.season-spring {
      --bg-gradient-start: #f0f9f0;
      --bg-gradient-end: #d9f0d9;
      --accent: #4ade80;
      --accent-glow: rgba(74, 222, 128, 0.5);
      --own-message-bg: rgba(74, 222, 128, 0.7);
    }
    body.season-spring.theme-dark {
      --bg-gradient-start: #14532d;
      --bg-gradient-end: #166534;
      --accent: #86efac;
      --accent-glow: rgba(134, 239, 172, 0.5);
      --own-message-bg: rgba(134, 239, 172, 0.7);
    }

    body.season-summer {
      --bg-gradient-start: #fef9c3;
      --bg-gradient-end: #fde68a;
      --accent: #fbbf24;
      --accent-glow: rgba(251, 191, 36, 0.5);
      --own-message-bg: rgba(251, 191, 36, 0.7);
    }
    body.season-summer.theme-dark {
      --bg-gradient-start: #854d0e;
      --bg-gradient-end: #a16207;
      --accent: #fcd34d;
      --accent-glow: rgba(252, 211, 77, 0.5);
      --own-message-bg: rgba(252, 211, 77, 0.7);
    }

    body.season-autumn {
      --bg-gradient-start: #ffedd5;
      --bg-gradient-end: #fed7aa;
      --accent: #f97316;
      --accent-glow: rgba(249, 115, 22, 0.5);
      --own-message-bg: rgba(249, 115, 22, 0.7);
    }
    body.season-autumn.theme-dark {
      --bg-gradient-start: #7c2d12;
      --bg-gradient-end: #9a3412;
      --accent: #fb923c;
      --accent-glow: rgba(251, 146, 60, 0.5);
      --own-message-bg: rgba(251, 146, 60, 0.7);
    }

    body.season-winter {
      /* —É–∂–µ –±–∞–∑–æ–≤—ã–µ, –Ω–æ –º–æ–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å */
    }
    body.season-winter.theme-dark {
      --bg-gradient-start: #0c4a6e;
      --bg-gradient-end: #075985;
      --accent: #7dd3fc;
    }

    /* –ø—Ä–∏–º–µ–Ω—è–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç —Ñ–æ–Ω–∞ */
    body {
      background: linear-gradient(145deg, var(--bg-gradient-start), var(--bg-gradient-end));
      transition: background 0.6s ease;
    }

    /* –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ËæπÊ°Ü */
    .messenger {
      background: rgba(0, 0, 0, 0.2); /* –±—É–¥–µ—Ç –Ω–∞–∫–ª–∞–¥—ã–≤–∞—Ç—å—Å—è –Ω–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç */
    }

    /* –Ω–µ–±–æ–ª—å—à–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
    @media (max-width: 600px) {
      .messenger-header {
        flex-direction: column;
        align-items: start;
      }
      .message {
        max-width: 90%;
      }
    }
  </style>
</head>
<body class="theme-light season-winter">
  <!-- –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —á–∞—Å—Ç–∏—Ü–∞–º–∏ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ js) -->
  <div class="season-particles" id="particleContainer"></div>

  <div class="messenger">
    <div class="messenger-header">
      <div class="title-block">
        <h2>–ø—É—Å—Ç–æ—Ç–∞ ¬∑ —á–∞—Ç</h2>
        <p id="seasonLabel">–∑–∏–º–∞ ¬∑ –º–æ—Ä–æ–∑–Ω—ã–π –≤–µ—Ç–µ—Ä</p>
      </div>
      <div class="controls">
        <!-- –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è) -->
        <button class="theme-btn" id="themeToggle">
          <span class="btn-icon" id="themeIcon">‚òÄÔ∏è</span>
          <span>—Ç–µ–º–∞</span>
        </button>
        <!-- –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–µ–∑–æ–Ω–æ–≤ (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏) -->
        <button class="season-btn" id="seasonToggle">
          <span class="btn-icon" id="seasonIcon">‚ùÑÔ∏è</span>
          <span id="seasonName">–∑–∏–º–∞</span>
        </button>
      </div>
    </div>

    <!-- –æ–∫–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π -->
    <div class="messages-container" id="messageContainer">
      <div class="message system">‚úß –¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø—É—Å—Ç–æ—Ç—É ‚úß</div>
      <div class="message system">–ø–∏—à–∏ —á—Ç–æ —É–≥–æ–¥–Ω–æ ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Å—Ç–∞–Ω—É—Ç—Å—è –∑–¥–µ—Å—å</div>
      <div class="message own">–ø—Ä–∏–≤–µ—Ç, –µ—Å—Ç—å –∫—Ç–æ?</div>
      <div class="message">... —Ç–∏—à–∏–Ω–∞ ...</div>
    </div>

    <!-- –ø–æ–ª–µ –≤–≤–æ–¥–∞ -->
    <div class="input-area">
      <input type="text" class="message-input" id="messageInput" placeholder="–Ω–∞–ø–∏—à–∏ –≤ –ø—É—Å—Ç–æ—Ç—É...">
      <button class="send-btn" id="sendButton">‚û§</button>
    </div>
  </div>

  <script>
    (function() {
      // ----- –°–û–°–¢–û–Ø–ù–ò–Ø -----
      const body = document.body;
      const themeToggle = document.getElementById('themeToggle');
      const seasonToggle = document.getElementById('seasonToggle');
      const themeIcon = document.getElementById('themeIcon');
      const seasonIcon = document.getElementById('seasonIcon');
      const seasonName = document.getElementById('seasonName');
      const seasonLabel = document.getElementById('seasonLabel');
      const messageInput = document.getElementById('messageInput');
      const sendButton = document.getElementById('sendButton');
      const messageContainer = document.getElementById('messageContainer');
      const particleContainer = document.getElementById('particleContainer');

      // –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ–∑–æ–Ω–æ–≤
      const seasons = ['winter', 'spring', 'summer', 'autumn'];
      const seasonRussian = {
        winter: '–∑–∏–º–∞',
        spring: '–≤–µ—Å–Ω–∞',
        summer: '–ª–µ—Ç–æ',
        autumn: '–æ—Å–µ–Ω—å'
      };
      const seasonIcons = {
        winter: '‚ùÑÔ∏è',
        spring: 'üå∏',
        summer: '‚òÄÔ∏è',
        autumn: 'üçÇ'
      };
      const seasonLabels = {
        winter: '‚ùÑÔ∏è –∑–∏–º–∞ ¬∑ –º–æ—Ä–æ–∑–Ω—ã–π –≤–µ—Ç–µ—Ä',
        spring: 'üå∏ –≤–µ—Å–Ω–∞ ¬∑ —Ü–≤–µ—Ç–µ–Ω–∏–µ',
        summer: '‚òÄÔ∏è –ª–µ—Ç–æ ¬∑ –∑–Ω–æ–π',
        autumn: 'üçÇ –æ—Å–µ–Ω—å ¬∑ –ª–∏—Å—Ç–æ–ø–∞–¥'
      };

      // —á–∞—Å—Ç–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ–∑–æ–Ω–∞ (–Ω–∞–±–æ—Ä –∏–∫–æ–Ω–æ–∫)
      const particles = {
        winter: ['‚ùÑÔ∏è', '‚ùÑÔ∏è', '‚ùÑÔ∏è', 'üßä', 'üå®Ô∏è'],
        spring: ['üå∏', 'üåº', 'üå±', 'üêù', 'ü¶ã'],
        summer: ['‚òÄÔ∏è', 'üåª', 'üçâ', '‚õ±Ô∏è', 'üåä'],
        autumn: ['üçÇ', 'üçÅ', 'üå∞', '‚òîÔ∏è', 'ü•Æ']
      };

      let currentSeasonIndex = 0; // winter
      let currentTheme = 'light'; // light

      // ----- –§–£–ù–ö–¶–ò–ò –°–ú–ï–ù–´ –°–ï–ó–û–ù–ê –ò –¢–ï–ú–´ -----
      function setSeason(index) {
        // —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π –∫–ª–∞—Å—Å —Å–µ–∑–æ–Ω–∞
        seasons.forEach(s => body.classList.remove(`season-${s}`));
        const newSeason = seasons[index];
        body.classList.add(`season-${newSeason}`);

        // –æ–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É –∏ —Ç–µ–∫—Å—Ç
        seasonIcon.textContent = seasonIcons[newSeason];
        seasonName.textContent = seasonRussian[newSeason];
        seasonLabel.textContent = seasonLabels[newSeason];

        // –æ–±–Ω–æ–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—ã
        createParticles(newSeason);

        // –º–∞–ª–µ–Ω—å–∫–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞—â–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏
        seasonIcon.style.animation = 'softSpin 0.6s';
        setTimeout(() => { seasonIcon.style.animation = ''; }, 600);
      }

      function setTheme(theme) {
        if (theme === 'dark') {
          body.classList.add('theme-dark');
          themeIcon.textContent = 'üåô';
        } else {
          body.classList.remove('theme-dark');
          themeIcon.textContent = '‚òÄÔ∏è';
        }
        // –∞–Ω–∏–º–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∏ —Ç–µ–º—ã
        themeIcon.style.transform = 'rotate(180deg) scale(1.2)';
        setTimeout(() => { themeIcon.style.transform = ''; }, 300);
      }

      // –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–µ–∑–æ–Ω–∞ (—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏)
      function nextSeason() {
        currentSeasonIndex = (currentSeasonIndex + 1) % seasons.length;
        setSeason(currentSeasonIndex);
      }

      // –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
      function toggleTheme() {
        currentTheme = currentTheme === 'light' ? 'dark' : 'light';
        setTheme(currentTheme);
      }

      // ----- –ß–ê–°–¢–ò–¶–´ (—Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ) -----
      function createParticles(season) {
        particleContainer.innerHTML = ''; // –æ—á–∏—â–∞–µ–º
        const count = 12; // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–∏—Ü
        for (let i = 0; i < count; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          // —Å–ª—É—á–∞–π–Ω–∞—è –∏–∫–æ–Ω–∫–∞ –∏–∑ –º–∞—Å—Å–∏–≤–∞ —Å–µ–∑–æ–Ω–∞
          const icons = particles[season] || particles.winter;
          const icon = icons[Math.floor(Math.random() * icons.length)];
          particle.textContent = icon;
          // —Å–ª—É—á–∞–π–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å—Ç–∞—Ä—Ç–∞, –∑–∞–¥–µ—Ä–∂–∫–∞, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
          const left = Math.random() * 100;
          const delay = Math.random() * 20;
          const duration = 10 + Math.random() * 15;
          const size = 1.5 + Math.random() * 2;
          particle.style.left = left + '%';
          particle.style.animationDelay = delay + 's';
          particle.style.animationDuration = duration + 's';
          particle.style.fontSize = (1.2 + Math.random() * 2) + 'rem';
          particle.style.opacity = 0.2 + Math.random() * 0.3;
          particleContainer.appendChild(particle);
        }
      }

      // ----- –î–û–ë–ê–í–õ–ï–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–Ø -----
      function addMessage(text, isOwn = true) {
        if (!text.trim()) return;
        const messageDiv = document.createElement('div');
        messageDiv.className = 'message' + (isOwn ? ' own' : '');
        messageDiv.textContent = text;
        messageContainer.appendChild(messageDiv);
        messageContainer.scrollTop = messageContainer.scrollHeight; // –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞
      }

      // ----- –°–û–ë–´–¢–ò–Ø -----
      themeToggle.addEventListener('click', toggleTheme);
      seasonToggle.addEventListener('click', nextSeason);

      sendButton.addEventListener('click', () => {
        const text = messageInput.value.trim();
        if (text) {
          addMessage(text, true);
          messageInput.value = '';

          // –æ—Ç–≤–µ—Ç –ø—É—Å—Ç–æ—Ç—ã (–∏–Ω–æ–≥–¥–∞)
          setTimeout(() => {
            const replies = ['...', '—Ç–∏—à–∏–Ω–∞', '–Ω–∏–∫–æ–≥–æ –Ω–µ—Ç', '‚ùÑÔ∏è', 'üåô'];
            const randomReply = replies[Math.floor(Math.random() * replies.length)];
            addMessage(randomReply, false);
          }, 800);
        }
      });

      messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendButton.click();
        }
      });

      // ----- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø (–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–∫–∏) -----
      (function init() {
        // —á–∏—Ç–∞–µ–º localStorage (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        const savedTheme = localStorage.getItem('messengerTheme');
        const savedSeason = localStorage.getItem('messengerSeason');

        if (savedTheme === 'dark') {
          currentTheme = 'dark';
          setTheme('dark');
        } else {
          currentTheme = 'light';
          setTheme('light');
        }

        if (savedSeason) {
          const idx = seasons.indexOf(savedSeason);
          if (idx !== -1) {
            currentSeasonIndex = idx;
          }
        }
        setSeason(currentSeasonIndex);

        // –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
        const observer = new MutationObserver(() => {
          localStorage.setItem('messengerTheme', body.classList.contains('theme-dark') ? 'dark' : 'light');
          let season = 'winter';
          seasons.forEach(s => { if (body.classList.contains(`season-${s}`)) season = s; });
          localStorage.setItem('messengerSeason', season);
        });
        observer.observe(body, { attributes: true, attributeFilter: ['class'] });
      })();

    })();
  </script>
</body>
</html>
