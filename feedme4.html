<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ò–≥—Ä–∞: –∫–æ—Ä–º–∏–º –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</title>
  <style>
    :root{
      --bg: #f6f6f8;
      --card: #ffffff;
      --accent: #2b8aef;
      --muted: #6b7280;
    }
    body{margin:0;font-family:Inter, system-ui;background:var(--bg);display:flex;justify-content:center;padding:28px;}
    .app{width:100%;max-width:900px}
    .balance {
      position: fixed;top: 18px;right: 24px;
      background: #fff;padding:10px 14px;border-radius:10px;
      box-shadow: 0 6px 18px rgba(33,33,33,0.08);
      font-weight:700;display:flex;gap:8px;align-items:center;
    }
    .balance .amount{color:#0f172a;font-size:18px}
    .card{background:var(--card);border-radius:14px;padding:22px;box-shadow: 0 8px 24px rgba(20,20,30,0.06);}
    .top{display:flex;flex-direction:column;align-items:center;gap:14px;margin-bottom:18px;}
    .character-wrap{width:320px;height:260px;background:#f9fafb;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-direction:column;}
    .character-wrap img,.character-wrap video{width:200px;height:auto;border-radius:8px;}
    .speech{margin-top:8px;font-size:16px;color:var(--muted);min-height:20px}
    .progress-container{width:100%;max-width:400px;background:#e5e7eb;border-radius:12px;overflow:hidden;height:20px;margin-top:10px;box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);}
    .progress-bar{height:100%;width:0%;background:linear-gradient(90deg,#34d399,#059669);transition: width 0.4s ease;}
    .grid{display:grid;grid-template-columns: repeat(4, 1fr);gap:12px;margin-top:18px;}
    .food{background:#fff;border-radius:10px;padding:12px;display:flex;flex-direction:column;align-items:center;gap:8px;box-shadow: 0 6px 14px rgba(12,12,20,0.04);}
    .food .emoji{font-size:28px}
    .food .name{font-weight:600}
    .food .price{color:var(--muted);font-size:14px}
    .food button{margin-top:6px;padding:8px 10px;border-radius:8px;border:none;background:var(--accent);color:white;cursor:pointer;font-weight:600;}
    .food button:disabled{opacity:0.45;cursor:not-allowed;background:#9ec7f9}
    @media (max-width:720px){.grid{grid-template-columns: repeat(2, 1fr)}}
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <div id="balance" class="balance">üí∞ <span class="amount">100</span></div>

      <div class="top">
        <div class="character-wrap">
          <!-- –°—Ç–∞—Ç–∏—á–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ -->
          <img id="characterImg" src="/home/evgenii/–†–∞–±–æ—á–∏–π —Å—Ç–æ–ª/bots/aiogram/Screenshot_20250827-212251.jpg" alt="–§—Ä–∞–Ω—Ü—É–∑" />
          <!-- –í–∏–¥–µ–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ, –±–µ–∑ loop!) -->
          <video id="characterVideo" width="200" muted style="display:none;">
            <source src="Screen_Recording_20250827_212210~2.mp4" type="video/mp4">
          </video>
          <div class="speech" id="speech">–ü—Ä–∏–≤–µ—Ç! –ü–æ–∫–æ—Ä–º–∏ –º–µ–Ω—è :)</div>
          <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
        </div>
      </div>

      <div class="grid" id="foodGrid"></div>
    </div>
  </div>

  <script>
    const DEFAULT_BALANCE = 100;
    const foods = [
      { emoji: 'ü•ñ', name: '–ë–∞–≥–µ—Ç', price: 10, fullness: 10 },
      { emoji: 'üßÄ', name: '–°—ã—Ä', price: 15, fullness: 15 },
      { emoji: 'üçá', name: '–í–∏–Ω–æ–≥—Ä–∞–¥', price: 8, fullness: 8 },
      { emoji: 'üç∑', name: '–í–∏–Ω–æ', price: 20, fullness: 12 },
      { emoji: 'üçé', name: '–Ø–±–ª–æ–∫–æ', price: 5, fullness: 5 },
      { emoji: 'ü•©', name: '–°—Ç–µ–π–∫', price: 25, fullness: 25 },
      { emoji: 'ü•ê', name: '–ö—Ä—É–∞—Å—Å–∞–Ω', price: 12, fullness: 10 },
      { emoji: 'üç´', name: '–®–æ–∫–æ–ª–∞–¥', price: 18, fullness: 12 }
    ];

    const balanceEl = document.querySelector('.balance .amount');
    const foodGrid = document.getElementById('foodGrid');
    const speech = document.getElementById('speech');
    const progressBar = document.getElementById('progressBar');
    const characterImg = document.getElementById('characterImg');
    const characterVideo = document.getElementById('characterVideo');

    let balance = DEFAULT_BALANCE;
    let fullness = 0;

    updateBalanceDOM();
    renderGrid();

    function renderGrid() {
      foodGrid.innerHTML = '';
      foods.forEach(food => {
        const node = document.createElement('div');
        node.className = 'food';
        node.innerHTML = `
          <div class="emoji">${food.emoji}</div>
          <div class="name">${food.name}</div>
          <div class="price">–¶–µ–Ω–∞: ${food.price} ‚ÇΩ</div>
          <button>–ö—É–ø–∏—Ç—å</button>
        `;
        const btn = node.querySelector('button');
        btn.addEventListener('click', () => buyFood(food));
        foodGrid.appendChild(node);
      });
    }

    function updateBalanceDOM() {
      balanceEl.textContent = balance;
    }

    function updateFullness(value) {
      fullness = Math.min(100, fullness + value);
      progressBar.style.width = fullness + '%';
      if (fullness >= 100) speech.textContent = '–û–Ω —Å—ã—Ç! üòå';
    }

    function playEatingAnimation() {
      characterImg.style.display = 'none';
      characterVideo.style.display = 'block';

      // –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ–º —Å –Ω–∞—á–∞–ª–∞, —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
      characterVideo.currentTime = 0;
      characterVideo.play();

      // –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É
      characterVideo.onended = () => {
        characterVideo.style.display = 'none';
        characterImg.style.display = 'block';
      };
    }

    function buyFood(food) {
      if (balance >= food.price) {
        balance -= food.price;
        updateBalanceDOM();
        updateFullness(food.fullness);
        speech.textContent = `–§—Ä–∞–Ω—Ü—É–∑ —Å—ä–µ–ª ${food.name}!`;
        playEatingAnimation();
      } else {
        speech.textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥ üòï';
      }
    }
  </script>
</body>
</html>
